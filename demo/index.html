<!DOCTYPE html>
<html lang="en-GB">
  <head>
    <meta charset="utf-8" />
    <style>
      .flex-center {
        display: flex;
        justify-content: center;
      }

      .text-center {
        text-align: center
      }

      .theater {}

      .floor {
        display: flex;
      }
    </style>
  </head>
  <body>
    <header>
      <h1>Demo Mene Booking system</h1>
      <hr />
    </header>
    <main class="flex-center">
      <div id="demo"></div>
    </main>
    <footer>
      <button onclick="save()">Guardar Cambios</button>
    </footer>

    <script src="../dist/src/index.js" type="module"></script>
    <script type="module">
      import { html, render } from 'lit';
      import { Mock } from './mocks.js';

      let floor1 = [...Mock.floor1];
      let floor2 = [...Mock.floor2];

      function updateList(list) {
        return list.map(element => element.map(item => ({
          id: item.id,
          status: item.status === 'SELECTED' ? 'RESERVED': item.status
        })));
      }


      // eslint-disable-next-line @typescript-eslint/no-unused-vars
      function save() {
        floor1 = updateList(floor1);
        floor2 = updateList(floor2);
      }


      window.addEventListener('place-status-changed', () => {
        console.log('yep');
      });


      render(
        html`
          <section class="theater">
            <div>
              <h3 class="text-center">Escenario</h3>
            </div>
            <hr />
            <div>
              <h3>Patio</h3>
              <div class="floor flex-center">
                <mene-booking .places=${floor1}> </mene-booking>
              </div>
            </div>
            <hr />
            <div>
              <h3>Entresuelo</h3>
              <div class="floor flex-center">
                <mene-booking .places=${floor2}> </mene-booking>
              </div>
            </div>
          </section>
        `,
        document.querySelector('#demo')
      );
    </script>
  </body>
</html>
